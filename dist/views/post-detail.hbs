{{!-- src/views/post-detail.hbs --}}

<div class="post-detail-container">
    <div class="post-header">
        <h1>{{post.title}}</h1>
        <div class="post-meta">
            <span class="author">By {{post.author.name}}</span>
            <span class="date">{{formatDate post.createdAt}}</span>
            {{#if post.isEdited}}
                <span class="edited">(edited)</span>
            {{/if}}
        </div>
    </div>

    <div class="post-content">
        <p>{{post.content}}</p>
    </div>

    <div class="post-footer">
        <div class="post-stats">
            <span class="likes-count">
                <i class="fas fa-heart"></i> {{post.likes.length}} likes
            </span>
            {{#if post.tags.length}}
                <div class="tags">
                    {{#each post.tags}}
                        <span class="tag">{{this}}</span>
                    {{/each}}
                </div>
            {{/if}}
        </div>
        
        {{#if currentUser}}
            <button class="like-btn" data-post-id="{{post._id}}">
                <i class="fas fa-heart"></i>
                <span class="like-text">Like</span>
            </button>
            
            {{#if currentUser}}
                {{#if (eq post.author._id currentUser.id)}}
                    <div class="post-actions">
                        <a href="/posts/{{post._id}}/edit" class="btn-secondary">Edit</a>
                        <button class="btn-danger delete-post-btn" data-post-id="{{post._id}}">Delete</button>
                    </div>
                {{/if}}
            {{/if}}
        {{/if}}
    </div>

    <!-- Comments Section -->
    <div class="comments-section">
        <h3>Comments</h3>
        
        {{#if currentUser}}
            <form action="/api/comments" method="POST" class="comment-form">
                <input type="hidden" name="postId" value="{{post._id}}">
                <div class="form-group">
                    <textarea name="content" placeholder="Write a comment..." required rows="3"></textarea>
                </div>
                <button type="submit" class="btn-primary">Post Comment</button>
            </form>
        {{else}}
            <p><a href="/">Login</a> to leave a comment.</p>
        {{/if}}

        <div class="comments-list">
            <p>Comments functionality will be available soon!</p>
        </div>
    </div>
</div>
